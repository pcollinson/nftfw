.\" Automatically generated by Pandoc 2.17.1.1
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "NFTFWADM" "1" "" "" "Nftfw documentation"
.hy
.SH NAME
.PP
\f[B]nftfwadm\f[R] - support for installation of the Nftfw firewall
generator
.SH SYNOPSIS
.PP
\f[B]nftfwadm\f[R] [\f[B]-h\f[R]] [\f[B]-c\f[R] \f[I]config\f[R]]
[\f[B]-o\f[R] \f[I]option\f[R]] [\f[B]-x | -f | -i | -q | -v \f[R]]
[\f[B]\f[BI]save|restore|clean\f[B]\f[R]]
.SH DESCRIPTION
.PP
\f[B]nftfw(1)\f[R] generates firewalls based on information derived from
control files.
It creates a new set of command files ready for loading in the kernel
and tests them using \f[I]nft(1)\f[R].
If the test succeeds, it makes a backup of the kernel settings before
installing the new rule set into the kernel.
If installation fails, \f[B]nftfw\f[R] loads the kernel tables from the
backup and deletes it, restoring the running system to the known safe
version.
\f[B]nftfw\f[R] deletes the backup file if installation succeeds.
.PP
When testing a new firewall setup, it can be useful to be able to
backtrack to a known working version, so \f[B]nftfw\f[R] will not create
a new backup file if one already exists.
The \f[B]nftfwadm\f[R] command provides the \f[B]save\f[R] action to
preload the backup file so that \f[B]nftfw\f[R] can revert to a known
working version on any failure.
The \f[B]restore\f[R] action reloads the saved backup settings into the
kernel and deletes the backup file.
The \f[B]clean\f[R] command deletes the backup file.
.PP
These are the available options to the program:
.TP
\f[B]-h\f[R], \f[B]--help\f[R]
Prints brief usage information.
.TP
\f[B]-c\f[R], \f[B]--config\f[R] CONFIG
Supply a alternate configuration file, overriding any values from the
default system settings.
.TP
\f[B]-i\f[R], \f[B]--info\f[R]
List all the configuration names and settings
.TP
\f[B]-O\f[R], \f[B]--Option\f[R] OPTION
OPTION is keyword=value and may be comma separated list of configuration
options.
The values override any settings in the configuration file.
.TP
\f[B]-q\f[R], \f[B]--quiet\f[R]
Suppress printing of errors and information messages to the terminal,
syslog output remains active.
Terminal output is suppressed when the output is not directed to a
terminal
.TP
\f[B]-v\f[R], \f[B]--verbose\f[R]
Change the default logging settings to INFO to show all errors and
information messages.
.SH FILES
.PP
Files can be located in \f[I]/\f[R] or \f[I]/usr/local\f[R].
.TP
\f[I]/etc/nftfw\f[R]
Location of control files.
.TP
\f[I]/var/lib/nftfw/\f[R]
Location of the backup file, \f[I]build.d\f[R], \f[I]test.d\f[R],
\f[I]install.d\f[R], lock files and the sqlite3 databases storing file
positions and blacklist information
.SH BUGS
.PP
See GitHub Issues: <https://github.com/pcollinson/nftfw/issues>
.SH AUTHOR
.PP
Peter Collinson (huge credit to the ideas from Patrick Cherry\[cq]s work
for the firewall for the Symbiosis hosting system).
.SH SEE ALSO
.PP
\f[B]nft(1)\f[R], \f[B]nftfwls(1)\f[R], \f[B]nftfwedit(1)\f[R],
\f[B]nftnetchk(1)\f[R], \f[B]nftfw-config(5)\f[R],
\f[B]nftfw-files(5)\f[R]
