.\" Automatically generated by Pandoc 2.17.1.1
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "NFTCHKNET" "1" "" "" "Nftfw documentation"
.hy
.SH NAME
.PP
\f[B]nftnetchk\f[R] \[em] command line tool to check if IPs in the
firewall database are present in blacknets.d files
.SH SYNOPSIS
.PP
\f[B]nftnetchk\f[R] [\f[B]-h | -l\f[R]]
.SH DESCRIPTION
.PP
\f[I]nftnetchk\f[R] is a command line tool that checks if the IP
addresses in the files in \f[I]blacknets.d\f[R] are legal.
In addition, it will determine if the IP addresses present in the
firewall database are unnecessary because they are part of any network
contained in files in \f[I]blacknets.d\f[R].
Entries in \f[I]blacknets.d\f[R] are usually network ranges expressed
using CIDR format and are added into \f[I]blacknets.d\f[R] by hand.
This tool will list entries in the firewall database that are no longer
needed because they are covered by the \f[I]blacknets.d\f[R] values.
.PP
If \f[I]nftnetchk\f[R] has nothing to report, it won\[cq]t output
anything.
.PP
Output is normally a `pretty printed' table with these headings:
.IP \[bu] 2
IP: The IP found IP address that can be removed.
.IP \[bu] 2
Found in: The name of the file in \f[I]blacknets.d\f[R] of which the
network IP is part.
.IP \[bu] 2
Net: The network entry that contains the IP
.IP \[bu] 2
Latest: The date and time of last recorded activity for this address
.IP \[bu] 2
First: The date and time of first recorded activity for this address
(`-' if same as Latest)
.IP \[bu] 2
Duration: How long between the Latest and First
.PP
The \f[B]-l\f[R] (or \f[B]\[en]list\f[R]) option just outputs IP
addresses as a list.
The output can be used to remove the IPs from the database:
.IP
.nf
\f[C]
sudo nftnetchk -l | while read ip; do sudo nftfwedit -d $ip; done
\f[R]
.fi
.SH FILES
.TP
\f[I]/etc/nftfw\f[R] or \f[I]/usr/local/etc/nftfw\f[R]
Location of control files
.TP
\f[I]/var/lib/nftfw/\f[R] or \f[I]/usr/local/var/lib/nftfw\f[R]
Location of \f[I]build\f[R], \f[I]install\f[R], lock file and sqlite3
database storing file positions and blacklist information
.SH BUGS
.PP
See GitHub Issues: <https://github.com/pcollinson/nftfw/issues>
.SH AUTHOR
.PP
Peter Collinson
.SH SEE ALSO
.PP
\f[B]nft(1)\f[R], \f[B]nftfwls(1)\f[R], \f[B]nftfwedit(1)\f[R],
\f[B]nftfwadm(1)\f[R], \f[B]nftfw-config(5)\f[R],
\f[B]nftfw-files(5)\f[R]
